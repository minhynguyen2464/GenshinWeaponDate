//Ngày rerun
//YYYY-MM-DD
var Weapon_Mistsplitter_Reforged = new Date('2022-5-30');
var Weapon_Primordial_Jade_Cutter = new Date('2022-11-1');
var Weapon_Skyward_Harp = new Date('2021-4-27');
var Weapon_Kagura27s_Verity = new Date('2022-12-6');
var Weapon_Key_of_Khaj = new Date('2022-11-1');
var Weapon_A_Thousand_Floating_Dreams = new Date('2022-11-18');
var Weapon_Hunter27s_Path = new Date('2022-9-9');
var Weapon_Amos_27_Bow = new Date('2022-9-27');
var Weapon_Lost_Prayer_to_the_Sacred_Winds = new Date('2021-6-29');
var Weapon_Engulfing_Lightning = new Date('2023-1-17');
var Weapon_Wolf27s_Gravestone = new Date('2021-3-16');
var Weapon_Vortex_Vanquisher = new Date('2022-9-9');
var Weapon_Haran_Geppaku_Futsu = new Date('2023-1-17');
var Weapon_Primordial_Jade_Winged = new Date('2023-2-7');
var Weapon_Tulaytullah27s_Remembrance = new Date('2022-12-27');
var Weapon_Calamity_Queller = new Date('2022-1-25');
var Weapon_Memory_of_Dust = new Date('2022-7-12');
var Weapon_Summit_Shaper = new Date('2022-8-23');
var Weapon_The_Unforged = new Date('2022-5-30');
var Weapon_Freedom = new Date('2022-8-2');
var Weapon_Polar_Star = new Date('2022-12-6');
var Weapon_Aqua_Simulacra = new Date('2023-2-28');
var Weapon_Aquila_Favonia = new Date('2021-6-8');
var Weapon_Skyward_Atlas = new Date('2021-7-20');
var Weapon_Staff_of_the_Scarlet_Sands = new Date('2022-10-14');
var Weapon_Thundering_Pulse = new Date('2022-11-18');
var Weapon_Skyward_Blade = new Date('2021-8-31');
var Weapon_Skyward_Pride = new Date('2021-6-29');
var Weapon_Song_of_Broken_Pines = new Date('2021-12-14');
var Weapon_Elegy_for_the_End = new Date('2022-10-14');
var Weapon_Staff_of_Homa = new Date('2023-2-28');
var Weapon_Everlasting_Moonglow = new Date('2022-9-27');
var Weapon_Redhorn_Stonethresher = new Date('2022-12-27');
var Weapon_Skyward_Spine = new Date('2021-8-10');

//Ngày hôm nay
var today = new Date();

//Ngày sau khi trừ
var Weapon_Mistsplitter_Reforged = Math.floor(
	(today - Weapon_Mistsplitter_Reforged) / (1000 * 3600 * 24)
);

var Weapon_Primordial_Jade_Cutter = Math.floor(
	(today - Weapon_Primordial_Jade_Cutter) / (1000 * 3600 * 24)
);
var Weapon_Skyward_Harp = Math.floor(
	(today - Weapon_Skyward_Harp) / (1000 * 3600 * 24)
);
var Weapon_Kagura27s_Verity = Math.floor(
	(today - Weapon_Kagura27s_Verity) / (1000 * 3600 * 24)
);
var Weapon_Key_of_Khaj = Math.floor(
	(today - Weapon_Key_of_Khaj) / (1000 * 3600 * 24)
);
var Weapon_A_Thousand_Floating_Dreams = Math.floor(
	(today - Weapon_A_Thousand_Floating_Dreams) / (1000 * 3600 * 24)
);
var Weapon_Hunter27s_Path = Math.floor(
	(today - Weapon_Hunter27s_Path) / (1000 * 3600 * 24)
);

var Weapon_Amos_27_Bow = Math.floor(
	(today - Weapon_Amos_27_Bow) / (1000 * 3600 * 24)
);

var Weapon_Lost_Prayer_to_the_Sacred_Winds = Math.floor(
	(today - Weapon_Lost_Prayer_to_the_Sacred_Winds) / (1000 * 3600 * 24)
);

var Weapon_Engulfing_Lightning = Math.floor(
	(today - Weapon_Engulfing_Lightning) / (1000 * 3600 * 24)
);
var Weapon_Wolf27s_Gravestone = Math.floor(
	(today - Weapon_Wolf27s_Gravestone) / (1000 * 3600 * 24)
);
var Weapon_Haran_Geppaku_Futsu = Math.floor(
	(today - Weapon_Haran_Geppaku_Futsu) / (1000 * 3600 * 24)
);
var Weapon_Primordial_Jade_Winged = Math.floor(
	(today - Weapon_Primordial_Jade_Winged) / (1000 * 3600 * 24)
);
var Weapon_Tulaytullah27s_Remembrance = Math.floor(
	(today - Weapon_Tulaytullah27s_Remembrance) / (1000 * 3600 * 24)
);
var Weapon_Calamity_Queller = Math.floor(
	(today - Weapon_Calamity_Queller) / (1000 * 3600 * 24)
);
var Weapon_Memory_of_Dust = Math.floor(
	(today - Weapon_Memory_of_Dust) / (1000 * 3600 * 24)
);
var Weapon_Summit_Shaper = Math.floor(
	(today - Weapon_Summit_Shaper) / (1000 * 3600 * 24)
);
var Weapon_The_Unforged = Math.floor(
	(today - Weapon_The_Unforged) / (1000 * 3600 * 24)
);
var Weapon_Freedom = Math.floor((today - Weapon_Freedom) / (1000 * 3600 * 24));
var Weapon_Polar_Star = Math.floor(
	(today - Weapon_Polar_Star) / (1000 * 3600 * 24)
);
var Weapon_Aqua_Simulacra = Math.floor(
	(today - Weapon_Aqua_Simulacra) / (1000 * 3600 * 24)
);
var Weapon_Aquila_Favonia = Math.floor(
	(today - Weapon_Aquila_Favonia) / (1000 * 3600 * 24)
);
var Weapon_Skyward_Atlas = Math.floor(
	(today - Weapon_Skyward_Atlas) / (1000 * 3600 * 24)
);
var Weapon_Staff_of_the_Scarlet_Sands = Math.floor(
	(today - Weapon_Staff_of_the_Scarlet_Sands) / (1000 * 3600 * 24)
);
var Weapon_Thundering_Pulse = Math.floor(
	(today - Weapon_Thundering_Pulse) / (1000 * 3600 * 24)
);
var Weapon_Skyward_Blade = Math.floor(
	(today - Weapon_Skyward_Blade) / (1000 * 3600 * 24)
);
var Weapon_Skyward_Pride = Math.floor(
	(today - Weapon_Skyward_Pride) / (1000 * 3600 * 24)
);
var Weapon_Song_of_Broken_Pines = Math.floor(
	(today - Weapon_Song_of_Broken_Pines) / (1000 * 3600 * 24)
);
var Weapon_Elegy_for_the_End = Math.floor(
	(today - Weapon_Elegy_for_the_End) / (1000 * 3600 * 24)
);
var Weapon_Staff_of_Homa = Math.floor(
	(today - Weapon_Staff_of_Homa) / (1000 * 3600 * 24)
);
var Weapon_Everlasting_Moonglow = Math.floor(
	(today - Weapon_Everlasting_Moonglow) / (1000 * 3600 * 24)
);
var Weapon_Redhorn_Stonethresher = Math.floor(
	(today - Weapon_Redhorn_Stonethresher) / (1000 * 3600 * 24)
);
var Weapon_Skyward_Spine = Math.floor(
	(today - Weapon_Skyward_Spine) / (1000 * 3600 * 24)
);
var Weapon_Vortex_Vanquisher = Math.floor(
	(today - Weapon_Vortex_Vanquisher) / (1000 * 3600 * 24)
);

document.querySelector('#Weapon_Mistsplitter_Reforged').innerHTML =
	Weapon_Mistsplitter_Reforged + ' Ngày';
document.querySelector('#Weapon_Primordial_Jade_Cutter').innerHTML =
	Weapon_Primordial_Jade_Cutter + ' Ngày';
document.querySelector('#Weapon_Skyward_Harp').innerHTML =
	Weapon_Skyward_Harp + ' Ngày';
document.querySelector('#Weapon_Kagura27s_Verity').innerHTML =
	Weapon_Kagura27s_Verity + ' Ngày';
document.querySelector('#Weapon_Key_of_Khaj').innerHTML =
	Weapon_Key_of_Khaj + ' Ngày';
document.querySelector('#Weapon_A_Thousand_Floating_Dreams').innerHTML =
	Weapon_A_Thousand_Floating_Dreams + ' Ngày';
document.querySelector('#Weapon_Hunter27s_Path').innerHTML =
	Weapon_Hunter27s_Path + ' Ngày';
document.querySelector('#Weapon_Amos_27_Bow').innerHTML =
	Weapon_Amos_27_Bow + ' Ngày';
document.querySelector('#Weapon_Lost_Prayer_to_the_Sacred_Winds').innerHTML =
	Weapon_Lost_Prayer_to_the_Sacred_Winds + ' Ngày';
document.querySelector('#Weapon_Engulfing_Lightning').innerHTML =
	Weapon_Engulfing_Lightning + ' Ngày';
document.querySelector('#Weapon_Wolf27s_Gravestone').innerHTML =
	Weapon_Wolf27s_Gravestone + ' Ngày';
document.querySelector('#Weapon_Haran_Geppaku_Futsu').innerHTML =
	Weapon_Haran_Geppaku_Futsu + ' Ngày';
document.querySelector('#Weapon_Primordial_Jade_Winged').innerHTML =
	Weapon_Primordial_Jade_Winged + ' Ngày';
document.querySelector('#Weapon_Tulaytullah27s_Remembrance').innerHTML =
	Weapon_Tulaytullah27s_Remembrance + ' Ngày';
document.querySelector('#Weapon_Calamity_Queller').innerHTML =
	Weapon_Calamity_Queller + ' Ngày';
document.querySelector('#Weapon_Memory_of_Dust').innerHTML =
	Weapon_Memory_of_Dust + ' Ngày';
document.querySelector('#Weapon_Summit_Shaper').innerHTML =
	Weapon_Summit_Shaper + ' Ngày';
document.querySelector('#Weapon_The_Unforged').innerHTML =
	Weapon_The_Unforged + ' Ngày';
document.querySelector('#Weapon_Freedom').innerHTML = Weapon_Freedom + ' Ngày';
document.querySelector('#Weapon_Polar_Star').innerHTML =
	Weapon_Polar_Star + ' Ngày';
document.querySelector('#Weapon_Aqua_Simulacra').innerHTML =
	Weapon_Aqua_Simulacra + ' Ngày';
document.querySelector('#Weapon_Aquila_Favonia').innerHTML =
	Weapon_Aquila_Favonia + ' Ngày';
document.querySelector('#Weapon_Skyward_Atlas').innerHTML =
	Weapon_Skyward_Atlas + ' Ngày';
document.querySelector('#Weapon_Staff_of_the_Scarlet_Sands').innerHTML =
	Weapon_Staff_of_the_Scarlet_Sands + ' Ngày';
document.querySelector('#Weapon_Thundering_Pulse').innerHTML =
	Weapon_Thundering_Pulse + ' Ngày';
document.querySelector('#Weapon_Skyward_Blade').innerHTML =
	Weapon_Skyward_Blade + ' Ngày';
document.querySelector('#Weapon_Skyward_Pride').innerHTML =
	Weapon_Skyward_Pride + ' Ngày';
document.querySelector('#Weapon_Song_of_Broken_Pines').innerHTML =
	Weapon_Song_of_Broken_Pines + ' Ngày';
document.querySelector('#Weapon_Elegy_for_the_End').innerHTML =
	Weapon_Elegy_for_the_End + ' Ngày';
document.querySelector('#Weapon_Staff_of_Homa').innerHTML =
	Weapon_Staff_of_Homa + ' Ngày';
document.querySelector('#Weapon_Everlasting_Moonglow').innerHTML =
	Weapon_Everlasting_Moonglow + ' Ngày';
document.querySelector('#Weapon_Redhorn_Stonethresher').innerHTML =
	Weapon_Redhorn_Stonethresher + ' Ngày';
document.querySelector('#Weapon_Skyward_Spine').innerHTML =
	Weapon_Skyward_Spine + ' Ngày';
document.querySelector('#Weapon_Vortex_Vanquisher').innerHTML =
	Weapon_Vortex_Vanquisher + ' Ngày';

function check_day(day, id) {
	if (day <= 150) {
		document.getElementById(id).style.color = '#218838';
	} else if (day <= 300) {
		document.getElementById(id).style.color = '#E0A800';
	} else {
		document.getElementById(id).style.color = '#C82333';
	}
	if (day < 0) {
		document.getElementById(id).style.color = '#0069D9';
	}
}

function check_minus_day(day, id) {
	if (day < 0) {
		day = day * -1;
		document.getElementById(id).innerHTML =
			'Banner sẽ kết thúc <br> sau ' + day + ' ngày nữa';
		document.getElementById(id).style.padding = '5px';
		document.getElementById(id).style.fontSize = 'medium';
	}
}
const variableToString = (varObj) => Object.keys(varObj)[0];
var variableNameStr = variableToString({ Weapon_Primordial_Jade_Cutter });
check_day(Weapon_Primordial_Jade_Cutter, variableNameStr);
check_minus_day(Weapon_Primordial_Jade_Cutter, variableNameStr);

var variableNameStr = variableToString({ Weapon_Mistsplitter_Reforged });
check_day(Weapon_Mistsplitter_Reforged, variableNameStr);
check_minus_day(Weapon_Mistsplitter_Reforged, variableNameStr);

var variableNameStr = variableToString({ Weapon_Skyward_Harp });
check_day(Weapon_Skyward_Harp, variableNameStr);
check_minus_day(Weapon_Skyward_Harp, variableNameStr);

var variableNameStr = variableToString({ Weapon_Kagura27s_Verity });
check_day(Weapon_Kagura27s_Verity, variableNameStr);
check_minus_day(Weapon_Kagura27s_Verity, variableNameStr);

var variableNameStr = variableToString({ Weapon_Key_of_Khaj });
check_day(Weapon_Key_of_Khaj, variableNameStr);
check_minus_day(Weapon_Key_of_Khaj, variableNameStr);

var variableNameStr = variableToString({ Weapon_A_Thousand_Floating_Dreams });
check_day(Weapon_A_Thousand_Floating_Dreams, variableNameStr);
check_minus_day(Weapon_A_Thousand_Floating_Dreams, variableNameStr);

var variableNameStr = variableToString({ Weapon_Hunter27s_Path });
check_day(Weapon_Hunter27s_Path, variableNameStr);
check_minus_day(Weapon_Hunter27s_Path, variableNameStr);

var variableNameStr = variableToString({ Weapon_Amos_27_Bow });
check_day(Weapon_Amos_27_Bow, variableNameStr);
check_minus_day(Weapon_Amos_27_Bow, variableNameStr);

var variableNameStr = variableToString({
	Weapon_Lost_Prayer_to_the_Sacred_Winds,
});
check_day(Weapon_Lost_Prayer_to_the_Sacred_Winds, variableNameStr);
check_minus_day(Weapon_Lost_Prayer_to_the_Sacred_Winds, variableNameStr);

var variableNameStr = variableToString({ Weapon_Engulfing_Lightning });
check_day(Weapon_Engulfing_Lightning, variableNameStr);
check_minus_day(Weapon_Engulfing_Lightning, variableNameStr);

var variableNameStr = variableToString({ Weapon_Wolf27s_Gravestone });
check_day(Weapon_Wolf27s_Gravestone, variableNameStr);
check_minus_day(Weapon_Wolf27s_Gravestone, variableNameStr);

var variableNameStr = variableToString({ Weapon_Vortex_Vanquisher });
check_day(Weapon_Vortex_Vanquisher, variableNameStr);
check_minus_day(Weapon_Vortex_Vanquisher, variableNameStr);

var variableNameStr = variableToString({ Weapon_Haran_Geppaku_Futsu });
check_day(Weapon_Haran_Geppaku_Futsu, variableNameStr);
check_minus_day(Weapon_Haran_Geppaku_Futsu, variableNameStr);

var variableNameStr = variableToString({ Weapon_Primordial_Jade_Winged });
check_day(Weapon_Primordial_Jade_Winged, variableNameStr);
check_minus_day(Weapon_Primordial_Jade_Winged, variableNameStr);

var variableNameStr = variableToString({ Weapon_Tulaytullah27s_Remembrance });
check_day(Weapon_Tulaytullah27s_Remembrance, variableNameStr);
check_minus_day(Weapon_Tulaytullah27s_Remembrance, variableNameStr);

var variableNameStr = variableToString({ Weapon_Calamity_Queller });
check_day(Weapon_Calamity_Queller, variableNameStr);
check_minus_day(Weapon_Calamity_Queller, variableNameStr);

var variableNameStr = variableToString({ Weapon_Memory_of_Dust });
check_day(Weapon_Memory_of_Dust, variableNameStr);
check_minus_day(Weapon_Memory_of_Dust, variableNameStr);

var variableNameStr = variableToString({ Weapon_Summit_Shaper });
check_day(Weapon_Summit_Shaper, variableNameStr);
check_minus_day(Weapon_Summit_Shaper, variableNameStr);

var variableNameStr = variableToString({ Weapon_The_Unforged });
check_day(Weapon_The_Unforged, variableNameStr);
check_minus_day(Weapon_The_Unforged, variableNameStr);

var variableNameStr = variableToString({ Weapon_Freedom });
check_day(Weapon_Freedom, variableNameStr);
check_minus_day(Weapon_Freedom, variableNameStr);

var variableNameStr = variableToString({ Weapon_Polar_Star });
check_day(Weapon_Polar_Star, variableNameStr);
check_minus_day(Weapon_Polar_Star, variableNameStr);

var variableNameStr = variableToString({ Weapon_Aqua_Simulacra });
check_day(Weapon_Aqua_Simulacra, variableNameStr);
check_minus_day(Weapon_Aqua_Simulacra, variableNameStr);

var variableNameStr = variableToString({ Weapon_Aquila_Favonia });
check_day(Weapon_Aquila_Favonia, variableNameStr);
check_minus_day(Weapon_Aquila_Favonia, variableNameStr);

var variableNameStr = variableToString({ Weapon_Skyward_Atlas });
check_day(Weapon_Skyward_Atlas, variableNameStr);
check_minus_day(Weapon_Skyward_Atlas, variableNameStr);

var variableNameStr = variableToString({ Weapon_Staff_of_the_Scarlet_Sands });
check_day(Weapon_Staff_of_the_Scarlet_Sands, variableNameStr);
check_minus_day(Weapon_Staff_of_the_Scarlet_Sands, variableNameStr);

var variableNameStr = variableToString({ Weapon_Thundering_Pulse });
check_day(Weapon_Thundering_Pulse, variableNameStr);
check_minus_day(Weapon_Thundering_Pulse, variableNameStr);

var variableNameStr = variableToString({ Weapon_Skyward_Blade });
check_day(Weapon_Skyward_Blade, variableNameStr);
check_minus_day(Weapon_Skyward_Blade, variableNameStr);

var variableNameStr = variableToString({ Weapon_Skyward_Pride });
check_day(Weapon_Skyward_Pride, variableNameStr);
check_minus_day(Weapon_Skyward_Pride, variableNameStr);

var variableNameStr = variableToString({ Weapon_Song_of_Broken_Pines });
check_day(Weapon_Song_of_Broken_Pines, variableNameStr);
check_minus_day(Weapon_Song_of_Broken_Pines, variableNameStr);

var variableNameStr = variableToString({ Weapon_Elegy_for_the_End });
check_day(Weapon_Elegy_for_the_End, variableNameStr);
check_minus_day(Weapon_Elegy_for_the_End, variableNameStr);

var variableNameStr = variableToString({ Weapon_Staff_of_Homa });
check_day(Weapon_Staff_of_Homa, variableNameStr);
check_minus_day(Weapon_Staff_of_Homa, variableNameStr);

var variableNameStr = variableToString({ Weapon_Everlasting_Moonglow });
check_day(Weapon_Everlasting_Moonglow, variableNameStr);
check_minus_day(Weapon_Everlasting_Moonglow, variableNameStr);

var variableNameStr = variableToString({ Weapon_Redhorn_Stonethresher });
check_day(Weapon_Redhorn_Stonethresher, variableNameStr);
check_minus_day(Weapon_Redhorn_Stonethresher, variableNameStr);

var variableNameStr = variableToString({ Weapon_Skyward_Spine });
check_day(Weapon_Skyward_Spine, variableNameStr);
check_minus_day(Weapon_Skyward_Spine, variableNameStr);

//Sort
const getCellValue = (tr, idx) =>
	tr.children[idx].innerText || tr.children[idx].textContent;

const comparer = (idx, asc) => (a, b) =>
	((v1, v2) =>
		v1 !== '' && v2 !== '' && !isNaN(v1) && !isNaN(v2)
			? v1 - v2
			: v1.toString().localeCompare(v2))(
		getCellValue(asc ? a : b, idx),
		getCellValue(asc ? b : a, idx)
	);

//Do the work
document.querySelectorAll('th').forEach((th) =>
	th.addEventListener('click', () => {
		const table = th.closest('table');
		Array.from(table.querySelectorAll('tr:nth-child(n+2)'))
			.sort(
				comparer(
					Array.from(th.parentNode.children).indexOf(th),
					(this.asc = !this.asc)
				)
			)
			.forEach((tr) => table.appendChild(tr));
	})
);

//Guessing next weapon
document.querySelector('#guess').addEventListener('click', () => {
	var day_list = document.querySelectorAll('[id*=Weapon_]');
	for (let i = 0; i < day_list.length; i++) {
		var id = day_list[i].id;
		var numb = day_list[i].innerHTML.match(/\d/g);
		numb = numb.join('');
		if (numb < 150) {
			document.querySelector('#' + id + '').parentNode.parentNode.innerHTML =
				'';
		} else {
		}
	}
});

document.getElementById('btn_click').click();
document.getElementById('btn_click').click();
// do the work...
/*document.querySelectorAll('th').forEach((th) =>
	th.addEventListener('click', () => {
		const table = th.closest('table');
		Array.from(table.querySelectorAll('tr:nth-child(n+2)'))
			.sort(
				comparer(
					Array.from(th.parentNode.children).indexOf(th),
					(this.asc = !this.asc)
				)
			)
			.forEach((tr) => table.appendChild(tr));
	})
);*/
